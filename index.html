<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JnanaDesigns</title>
  <meta name="description" content="Scientific graphic design portfolio by Apoorva Jnana. Publication-ready figures, visual abstracts, posters, presentations, and design insights.">
  <style>
    :root{
      --maxw:980px;
      --bg:#fbfbfb;
      --card:#fff;
      --muted:#666;
      --accent:#0b66ff;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    body{margin:0;background:var(--bg);color:#111;line-height:1.45;}
    header{position:sticky;top:0;backdrop-filter:blur(4px);background:rgba(255,255,255,0.98);border-bottom:1px solid #e9e9e9;z-index:50}
    .wrap{max-width:var(--maxw);margin:0 auto;padding:18px}
    .top{display:flex;align-items:center;justify-content:space-between;gap:12px}
    h1{
    margin:0;
    font-size:26px;
    font-weight:600;
    letter-spacing:0.2px;
    }
    .jnana{
    font-family:"Poppins", sans-serif;
    font-weight:600;
    }
    .designs{
    font-family:"Playfair Display", serif;
    font-weight:500;
    font-style:italic;
    letter-spacing:0.2px;
    margin-left:2px; /* small intentional separation */
    }
    .ctas{display:flex;gap:10px}
    .btn{font-size:13px;padding:8px 12px;border-radius:8px;border:1px solid #e6e6e6;background:#fff;text-decoration:none;color:inherit}
    .btn.primary{background:var(--accent);color:#fff;border-color:rgba(11,102,255,0.9)}
    .hero{padding:14px 0 8px;color:var(--muted);font-size:14px}
    .meta{font-size:13px;color:var(--muted);margin-top:6px}

    main{max-width:var(--maxw);margin:18px auto;padding:0 18px 60px}

    /* filters */
    .filters{display:flex;gap:8px;margin:12px 0 18px;flex-wrap:wrap}
    .filters button{
      background:#fff;
      border:1px solid #e9e9e9;
      padding:8px 10px;
      border-radius:8px;
      cursor:pointer;
      font-size:13px;
    }
    .filters button.active{background:var(--accent);color:#fff;border-color:var(--accent)}
/* pastel category colours */
.filters button[data-filter="figure"]{
  background:#f9f3f3;
  border-color:#f0dede;
}
.filters button[data-filter="abstract"]{
  background:#f3fbf7;
  border-color:#d8efe0;
}
.filters button[data-filter="poster"]{
  background:#fcf7f3;
  border-color:#f2e7d6;
}
.filters button[data-filter="presentation"]{
  background:#f5f7ff;
  border-color:#dbe1ff;
}
.filters button[data-filter="btw"]{
  background:#f9f5ff;
  border-color:#eadffb;
}

/* active state always overrides pastel */
.filters button.active{
  background:var(--accent);
  color:#fff;
  border-color:var(--accent);
}

    /* grid */
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px}
    .card{
  background:var(--card);
  border:1px solid #eee;
  padding:12px;
  border-radius:10px;
  display:flex;
  flex-direction:column;
  gap:10px;
  transition:transform 160ms ease,box-shadow 160ms ease;
  overflow:hidden;
}

.card:hover{
  transform:translateY(-4px);
  box-shadow:0 8px 24px rgba(0,0,0,0.06);
}

.title{
  font-family:"Poppins",sans-serif;
  font-size:15px;
  font-weight:600;
}

.thumb{
  width:100%;
  height:170px;
  object-fit:cover;
  border-radius:6px;
  border:1px solid #eaeaea;
}

.labels{
  font-size:12px;
  color:#777;
  margin-top:4px;
  text-transform:capitalize;
}

    .tools{margin-top:8px;font-size:13px;color:var(--muted)}

    /* case */
    .case{background:#fff;padding:14px;border-radius:8px;border:1px solid #eee;margin-top:22px}
    .case h3{margin:0 0 8px;font-size:15px}

    footer{padding:28px 18px;text-align:center;color:var(--muted);font-size:13px}

    /* lightbox */
    #lightbox{
      display:none;
      position:fixed;inset:0;
      background:rgba(0,0,0,0.75);
      align-items:center;justify-content:center;
      padding:18px;z-index:9999
    }
    #lightbox img{
      max-width:calc(100% - 40px);
      max-height:90vh;
      border-radius:8px;border:6px solid rgba(255,255,255,0.06);
      box-shadow:0 12px 30px rgba(0,0,0,0.4)
    }
  </style>
</head>
<body>

<header>
  <div class="wrap top">
    <div>
      <h1>
      <span class="jnana">Jnana</span><span class="designs">Designs</span>
      </h1>
      <div class="hero">Scientific graphic design portfolio of Apoorva Jnana; featuring figures, visual abstracts, posters, presentations, and behind-the-work insights.</div>
      <div class="meta">Tools: Illustrator, Affinity Designer, Microsoft powerpoint (yes, really), iArtbook (iOS), Noteful (iOS)</div>
    </div>

    <div class="ctas">
      <a class="btn" href="mailto:apoorva@example.com">Email</a>
      <a class="btn" href="https://www.linkedin.com/in/yourprofile" target="_blank">LinkedIn</a>
      <a class="btn primary" id="download-pdf" href="portfolio.pdf" target="_blank">PDF</a>
    </div>
  </div>
</header>

<main>
  <div class="wrap">
  <input
  id="search"
  type="text"
  placeholder="Search projects…"
  style="width:100%; padding:10px; border:1px solid #ddd; border-radius:6px; margin-bottom:12px; font-size:14px;">

    <!-- FILTER BUTTONS -->
    <div class="filters">
      <button data-filter="all" class="active">All</button>
      <button data-filter="figure">Figures</button>
      <button data-filter="abstract">Visual abstracts</button>
      <button data-filter="poster">Posters</button>
      <button data-filter="presentation">Presentations</button>
      <button data-filter="btw">BTW</button>
    </div>

    <section class="grid" id="grid">

      <!-- FIGURE example -->
      <article class="card" data-type="figure">
        <p class="title">Pyocyanin figure</p>
        <img class="thumb" src="images/figure1.jpg" loading="lazy">
        <p class="cap">Designed layout + final art. <a href="#" target="_blank">Published</a></p>
        <p class="tools">Illustrator, BioRender</p>
      </article>

      <!-- ABSTRACT example -->
      <article class="card" data-type="abstract">
        <p class="title">Visual abstracts: the soul of witty science</p>
        <img class="thumb" src="images/visualabstract1.png" loading="lazy">
        <p class="cap">Single-panel visual story for manuscript. <a href="#" target="_blank">Published</a></p>
        <p class="tools">Illustrator</p>
      </article>

      <!-- POSTER example -->
      <article class="card" data-type="poster">
        <p class="title">Posters: Ticket to knowledge and conference swag</p>
        <img class="thumb" src="images/poster1.jpg" loading="lazy">
        <p class="cap">Poster layout with microscopy panels.</p>
        <p class="tools">Inkscape, Illustrator</p>
      </article>

      <!-- PRESENTATION example -->
      <article class="card" data-type="presentation">
        <p class="title">Presentation: Microsot FTW</p>
        <img class="thumb" src="images/presentation1.jpg" loading="lazy">
        <p class="cap">Slide design for research talk. <a href="#" target="_blank">View</a></p>
        <p class="tools">Presentation design</p>
      </article>

      <!-- BTW example -->
      <article class="card" data-type="btw">
        <p class="title">BTW: Insights, tips, commentary on the state of art and science</p>
        <img class="thumb" src="images/btw1.jpg" loading="lazy">
        <p class="cap">Short insights on simplifying complex figures. <a href="#" target="_blank">Read</a></p>
        <p class="tools">Behind The Work</p>
      </article>

    </section>

  </div>
</main>

<!-- Lightbox -->
<div id="lightbox">
  <img id="lb-img" src="">
</div>

<footer>
  © <span id="year"></span> JnanaDesigns — All rights reserved
</footer>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();

  // Filters
  document.querySelectorAll('.filters button').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      document.querySelectorAll('.filters button').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      const f = btn.getAttribute('data-filter');
      document.querySelectorAll('.card').forEach(c=>{
        c.style.display = (f === 'all' || c.dataset.type === f) ? 'flex' : 'none';
      });
    });
  });
// SEARCH FILTER
const searchInput = document.getElementById('search');
searchInput.addEventListener('input', ()=>{
  const q = searchInput.value.toLowerCase();
  document.querySelectorAll('.card').forEach(card=>{
    const text = card.innerText.toLowerCase();
    card.style.display = text.includes(q) ? 'flex' : 'none';
  });
});

  // Lightbox
  const lb = document.getElementById('lightbox');
  const lbImg = document.getElementById('lb-img');
  document.querySelectorAll('.card img').forEach(img=>{
    img.style.cursor='zoom-in';
    img.addEventListener('click', e=>{
      lbImg.src = e.target.src;
      lb.style.display='flex';
    });
  });
  lb.addEventListener('click', ()=> lb.style.display='none');
</script>
<script>
/* GitHub Issues CMS loader
   - Expects issues in the repo with:
     - Title = project title
     - Body = caption/description (first paragraph used)
     - Image = first image embedded in the issue body (drag-drop image into issue)
     - Labels = used to determine data-type (use label names: figure, abstract, poster, presentation, btw)
   - Add this right before </body>. */

(async function(){
  const owner = 'apoorvaj192';    // your GitHub username
  const repo  = 'jnanadesigns';   // your repo name
  const issuesUrl = `https://api.github.com/repos/${owner}/${repo}/issues?state=open&per_page=100`;

  // Helper: extract first image URL from markdown body (pattern: ![alt](url))
  function extractImageFromMarkdown(md){
    if(!md) return null;
    const imgRegex = /!\[.*?\]\((https?:\/\/[^\s)]+)\)/i;
    const m = md.match(imgRegex);
    return m ? m[1] : null;
  }

  // Helper: get first paragraph from markdown body
  function extractFirstParagraph(md){
    if(!md) return '';
    // remove image markdown entirely to avoid duplication
    let text = md.replace(/!\[.*?\]\((https?:\/\/[^\s)]+)\)/gi, '');
    // Replace github-style references with nothing
    text = text.replace(/\[([^\]]+)\]\([^)]+\)/g, '$1');
    // split by double newline or single newline
    const parts = text.split(/\n\s*\n/).map(s => s.trim()).filter(Boolean);
    if(parts.length === 0) return text.trim().split('\n').slice(0,3).join(' ').trim();
    return parts[0];
  }

  // Optional: show a loading line
  const grid = document.getElementById('grid');
  const taglineEl = document.getElementById('tagline') || document.createElement('div');
  if(!taglineEl.id) { taglineEl.id = 'tagline'; grid.parentNode.insertBefore(taglineEl, grid); }
  taglineEl.textContent = '';

  try {
    const res = await fetch(issuesUrl);
    if(!res.ok) throw new Error('Failed to fetch issues: ' + res.status);
    const issues = await res.json();

    // Optionally sort by creation date so newest appear first
    issues.sort((a,b)=> new Date(b.created_at) - new Date(a.created_at));

    // Clear existing static cards (optional)
    grid.innerHTML = '';

    if(issues.length === 0){
      grid.innerHTML = '<p style="color:#666">No projects found. Create an Issue to add items to the portfolio.</p>';
      taglineEl.textContent = '';
      return;
    }

    // Map each issue -> card
    for(const issue of issues){
      // Skip pull requests (GitHub treats PRs as issues as well)
      if(issue.pull_request) continue;

      // Determine type from labels (use the first matching label that equals a known type)
      const labelNames = (issue.labels || []).map(l => l.name.toLowerCase());
      const knownTypes = ['figure','abstract','poster','presentation','btw'];
      const type = labelNames.find(l => knownTypes.includes(l)) || 'figure';

      const title = issue.title || 'Untitled';
      const bodyMd = issue.body || '';
      const caption = extractFirstParagraph(bodyMd) || '';
      const image = extractImageFromMarkdown(bodyMd); // might be null
      const url = issue.html_url; // link to the issue for "Read more"

      // Build card element
      const art = document.createElement('article');
      art.className = 'card';
      art.dataset.type = type;

      // Title (clickable)
const titleEl = document.createElement('p');
titleEl.className = 'title';
const titleLink = document.createElement('a');
titleLink.href = `./project.html?issue=${issue.number}`;
titleLink.textContent = title;
titleLink.style.color = 'inherit';
titleLink.style.textDecoration = 'none';
titleLink.style.display = 'inline-block';
titleEl.appendChild(titleLink);
art.appendChild(titleEl);


      // Image (if found)
      if(image){
        const img = document.createElement('img');
        img.className = 'thumb';
        img.src = image;
        img.alt = title;
        img.loading = 'lazy';
        art.appendChild(img);
      }

      // Caption block
      const cap = document.createElement('p');
      cap.className = 'cap';
      if(caption){
        // If issue has a link inside body and you want to link "Read", keep plain caption and add link
        const readLink = document.createElement('a');
        readLink.href = `./project.html?issue=${issue.number}`;
        readLink.target = '_blank';
        readLink.rel = 'noopener';
        readLink.textContent = ' Read';
        // set text to caption and append read link
        cap.textContent = caption;
        cap.appendChild(document.createTextNode(' '));
        cap.appendChild(readLink);
      } else {
        cap.innerHTML = `<a href="${url}" target="_blank" rel="noopener">Open</a>`;
      }
      art.appendChild(cap);

      // Tools / footer small text - optional: first label or created date
      const tools = document.createElement('p');
      tools.className = 'tools';
      tools.textContent = (labelNames.length>0 ? labelNames.join(', ') : '') + ' ';
      art.appendChild(tools);

      grid.appendChild(art);
    }

    // Now re-run the existing filter setup (in case filters already exist)
    (function attachFilters(){
      const filterBtns = document.querySelectorAll('.filters button');
      filterBtns.forEach(btn=>{
        btn.addEventListener('click', ()=>{
          filterBtns.forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
          const f = btn.getAttribute('data-filter');
          // update tagline if needed (you may have tagline object elsewhere)
          // Show/hide cards
          document.querySelectorAll('.card').forEach(c=>{
            c.style.display = (f === 'all' || c.dataset.type === f) ? 'flex' : 'none';
          });
        });
      });
    })();

  } catch(err){
    console.error(err);
    grid.innerHTML = '<p style="color:#c33">Unable to load projects. See console for details.</p>';
    taglineEl.textContent = '';
  }

})();
</script>

</body>
</html>
